The technology behind the eKwip is able to capture the movements of the knee and will accurately create an industry standard Knee Injury Risk Index, or KIRI for short. The system consists of several sub-components, each of which performs an important function as part of the system as a whole. The sub-componenets include a neoprene wrap, a microcontroller, sensors, a wireless module, a Micro SD card, and a webserver.

\subsection {Wrap}
eKwip is a neoprene wrap that fits over the knee. A wrap of this type was chosen because itâ€™s relatively small, unobtrusive, and stays close to the skin, which is important for correctly measuring the movement of the knee itself, instead of the movement of the wrap. The wrap was designed to be unobtrusive in order to encourage athletes to wear them more often. Unlike current mechanical braces on the market, eKwip does not hinder the movement of the knee, which makes eKwip much more attractive to athletes.

\subsection {Microcontroller}
The microcontroller is responsible for reading data from the sensors, sending the data over the network link, and storing the data on the SD card. A microcontroller was chosen based on storage capacity, clock speed, ease of use, and the ability to multitask. These are important because a fast processor will allow the reading of data at a fast enough rate, a decent amount of storage will facilitate the storage the code libraries in use and to give some initial storage for the data, and the ability to multitask will enable the reading of data and send it over a network link simultaneously. Given all these considerations, the mBed LPC1768 was selected as an ideal microcontroller for this project.

The mBed is ideal for this project because of its small size and impressive performance. Perhaps most importantly, the mBed has the ability to interface with many different modules at the same time, as it includes three UART serial ports, two SPI ports, two I2C ports, a USB port, a CAN port, and an ethernet port, among other GPIO pins. The mBed sports a powerful 96 MHz ARM Cortex-M3 processor. These features come together to allow several sensors and communication devices to be connected to the mBed at one time.

\subsection {Sensors}
While the microcontroller is the brain of eKwip, it would be impossible to measure and model the movement of the leg and knee without some sort of sensors. In order to accomplish the sensing, a set of two inertial measurement units, or IMUs, were selected. Two IMUs are required, one on the upper leg and one on the lower leg, so the relative angles of the knee can be measured in order to give an accurate model of the leg. A small IMU that is able to send data very quickly and communicates via UART serial is utilized by eKwip. This allows easy mounting of the IMUs, fast data reading, and easy interface with the mBed. In accordance with all of these considerations, the Pololu UM6-LT was designated the best IMU for this application. The UM6-LT is approximately the size of a quarter, and can measure absolute angles, rate of change of the angles, and acceleration.

An mBed library for the sensors was initially used in order to set up the IMUs and get initial data readings. However, once performance became a concern, it was clear that the library would not give the speed required for the prediction of ACL injuries. The UM6-LT offers two operating modes, broadcast and query. The library used query mode, which involves sending a query to the IMU and waiting for a response. This was the limitation in the speed, so a new library was implemented, which utilizes the UM6-LT's broadcast mode. This allows much faster reading, on the order of 3ms per data point, as opposed to the previous read time of 30ms.

\subsection {Wireless Module}
In order to allow coaches to monitor the performance of athletes on the field and doctors to monitor the recovery of injured patients, a wireless interface that allows eKwip measurements to be displayed in real time was implemented. In order to achieve wireless communication, a Wifly module was integrated into the system. The Wifly is a small Wifi board that communicates via UART serial. Having a wireless connection is useful because data can be streamed in real time to the server that is running in order to provide an intuitive visualization to users and/or their doctors. The only constraint with this is that the user must be in range of a wireless network.

Initially, the wifi module was streaming the data extremely slowly. It was determined that this was due to packetization of the data and a very long data string being sent with each data point. In order to mitigate this problem, the data string was shortened, and the Wifly was configured to send a packet each time a data point is received. This improved the wifi sampling rate to 10 Hz, which will be increased by raising the baud rate on the serial line between the mBed and the Wifly.

\subsection {Micro SD Card}
If no network is present, eKwip will log all the data that is being received to a Micro SD card so that the wearer can access their data in a later point. The Micro SD card reader will be attached to the mBed via UART serial. It will be written using a simply file format that will allow parsing of the data when in range of a wireless network. Alternatively, the Micro SD card can be removed and connected to a computer in order to import the data.

\subsection {Server}
- TODO: Alex
